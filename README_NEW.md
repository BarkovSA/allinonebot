# ü§ñ AllInOne Telegram Bot

> –ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç —Å AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π, –∏–≥—Ä–∞–º–∏, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è–º–∏ –∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏

[![Deno](https://img.shields.io/badge/Deno-2.5.6-black?logo=deno)](https://deno.land/)
[![Grammy](https://img.shields.io/badge/Grammy-1.34.0-blue)](https://grammy.dev/)
[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker)](https://www.docker.com/)

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ
- **AI –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - Kandinsky 3.0 API
- **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ** - –¢–µ–∫—Å—Ç –≤ –≤–∏–¥–µ–æ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### üéÆ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
- **7 HTML5 –∏–≥—Ä** —Å Telegram Web Apps
  - üêç –ó–º–µ–π–∫–∞ (—Å —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ —Å—Ç–µ–Ω—ã)
  - üß± –ê—Ä–∫–∞–Ω–æ–∏–¥ (—Å –±—É—Å—Ç–∞–º–∏)
  - üèì –ü–∏–Ω–≥-–ø–æ–Ω–≥ (–ø—Ä–æ—Ç–∏–≤ AI)
  - ü¶ñ T-Rex Runner
  - üê¶ Flappy Bird
  - üëæ Space Invaders
  - üß© Tetris
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ñ–∏–ª—å–º–æ–≤** - 7 –∂–∞–Ω—Ä–æ–≤, 25+ —Ñ–∏–ª—å–º–æ–≤
- **–ê–Ω–µ–∫–¥–æ—Ç—ã –∏ —à—É—Ç–∫–∏** - 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —é–º–æ—Ä–∞

### üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã
- **–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã** - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–£–º–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** - –° —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º —Ä–µ—á–∏
- **–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç** - –§–∏–∞—Ç –∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
  - USD, EUR, GBP, JPY, CNY ‚Üí RUB
  - Bitcoin, Ethereum, Toncoin, Dogecoin

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Runtime**: Deno 2.5.6
- **Framework**: Grammy 1.34.0 (Telegram Bot API)
- **Database**: PostgreSQL 16
- **Containerization**: Docker + Docker Compose

### AI & External APIs
- **Image Generation**: Kandinsky 3.0 (FusionBrain API)
- **Speech Recognition**: OpenAI Whisper ASR
- **Weather**: OpenWeatherMap API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **Currency**: Exchange Rate API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Frontend (Games)
- **HTML5 Canvas** - 60 FPS —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- **Telegram Web Apps SDK** - –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **GitHub Pages** - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ –∏–≥—Ä

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
allinonets/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot.ts              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ main.ts             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.ts           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ types.ts            # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ db/                 # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.ts
‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # Middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ antiSpam.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ state.ts
‚îÇ   ‚îú‚îÄ‚îÄ modules/            # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alarm/          # –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currency/       # –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ games/          # –ò–≥—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ imagegen/       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jokes/          # –ê–Ω–µ–∫–¥–æ—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu.ts         # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ movies/         # –§–∏–ª—å–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ video/          # –í–∏–¥–µ–æ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ weather/        # –ü–æ–≥–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ logger.ts
‚îú‚îÄ‚îÄ games-deploy/           # HTML5 –∏–≥—Ä—ã –¥–ª—è GitHub Pages
‚îÇ   ‚îú‚îÄ‚îÄ snake.html
‚îÇ   ‚îú‚îÄ‚îÄ arkanoid.html
‚îÇ   ‚îú‚îÄ‚îÄ pingpong.html
‚îÇ   ‚îú‚îÄ‚îÄ flappybird.html
‚îÇ   ‚îú‚îÄ‚îÄ dino.html
‚îÇ   ‚îú‚îÄ‚îÄ tetris.html
‚îÇ   ‚îî‚îÄ‚îÄ spaceinvaders.html
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile              # –û–±—Ä–∞–∑ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ deno.json              # Deno –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose
- Git
- Telegram Bot Token (–æ—Ç @BotFather)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone https://github.com/yourusername/allinonebot.git
cd allinonebot
```

2. **–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª**
```env
# Telegram
BOT_TOKEN=your_bot_token_here

# Database
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=allinone_bot
DATABASE_USER=allinone_user
DATABASE_PASSWORD=allinone_password

# AI APIs (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
FUSIONBRAIN_API_KEY=your_fusionbrain_key
FUSIONBRAIN_SECRET_KEY=your_fusionbrain_secret

# Games
GAME_SERVER_URL=https://barkovsa.github.io/allinonebot

# Whisper ASR
WHISPER_API_URL=http://whisper:9000
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker Compose**
```bash
docker compose up -d
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
```bash
docker logs allinone-bot -f
```

### –î–µ–ø–ª–æ–π –∏–≥—Ä –Ω–∞ GitHub Pages

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ `games-deploy/` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ GitHub Pages (Settings ‚Üí Pages ‚Üí main branch)
4. –û–±–Ω–æ–≤–∏—Ç–µ `GAME_SERVER_URL` –≤ `.env`

## üéÆ –ú–æ–¥—É–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```typescript
// modules/imagegen/handler.ts
- Kandinsky 3.0 API
- Async –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å polling
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
```

### –ò–≥—Ä—ã
```typescript
// modules/games/handler.ts
- Telegram Web Apps –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- 7 –∏–≥—Ä —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π
- Touch + Keyboard —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- Haptic feedback
```

### –§–∏–ª—å–º—ã
```typescript
// modules/movies/handler.ts
- 7 –∂–∞–Ω—Ä–æ–≤ (–±–æ–µ–≤–∏–∫–∏, –∫–æ–º–µ–¥–∏–∏, —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞, –¥—Ä–∞–º—ã, —É–∂–∞—Å—ã, –¥–µ—Ç–µ–∫—Ç–∏–≤—ã, –∞–Ω–∏–º–µ)
- 25+ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
- –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
```

### –í–∞–ª—é—Ç—ã
```typescript
// modules/currency/handler.ts
- 5 —Ñ–∏–∞—Ç –≤–∞–ª—é—Ç (USD, EUR, GBP, JPY, CNY)
- 8 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç (BTC, ETH, BNB, SOL, XRP, DOGE, TON, TRX)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ä—É–±–ª–∏
- –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã
```

### –ê–Ω–µ–∫–¥–æ—Ç—ã
```typescript
// modules/jokes/handler.ts
- 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ–±—â–∏–µ, IT, –∏–∑ –∂–∏–∑–Ω–∏, —á—ë—Ä–Ω—ã–π —é–º–æ—Ä)
- 20+ –∞–Ω–µ–∫–¥–æ—Ç–æ–≤
- –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
```typescript
// modules/alarm/handler.ts
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (Whisper ASR)
- –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥
- –°–ø–∏—Å–æ–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –£–¥–∞–ª–µ–Ω–∏–µ/–ø–µ—Ä–µ–Ω–æ—Å
```

### –ü–æ–≥–æ–¥–∞
```typescript
// modules/weather/handler.ts
- –ü–æ –≥–æ—Ä–æ–¥—É
- –ü–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≥–Ω–æ–∑
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ PostgreSQL
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  telegram_id BIGINT UNIQUE NOT NULL,
  username VARCHAR(255),
  first_name VARCHAR(255),
  city VARCHAR(255),
  latitude DOUBLE PRECISION,
  longitude DOUBLE PRECISION,
  timezone VARCHAR(50),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
CREATE TABLE alarms (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  message TEXT NOT NULL,
  scheduled_at TIMESTAMP NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Anti-spam middleware (3 –∑–∞–ø—Ä–æ—Å–∞ / 10 —Å–µ–∫—É–Ω–¥)
- Rate limiting –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL injection (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- Docker security best practices

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: ~30 —Å–µ–∫—É–Ω–¥
- **–û—Ç–≤–µ—Ç –±–æ—Ç–∞**: < 100ms
- **–ò–≥—Ä—ã**: 60 FPS –Ω–∞ Canvas
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Connection pooling

## üõ£Ô∏è Roadmap

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [ ] –†–µ–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ (FFmpeg)
- [ ] –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–∞–ª—é—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏
- [ ] –ë–æ–ª—å—à–µ –∏–≥—Ä (Snake multiplayer, Chess)
- [ ] –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- [ ] Leaderboards –¥–ª—è –∏–≥—Ä

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- [ ] AI —á–∞—Ç-–±–æ—Ç (GPT-4 / Claude)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º—É–∑—ã–∫–∏
- [ ] QR-–∫–æ–¥—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- [ ] URL shortener
- [ ] –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è Pull Requests! –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ Issue.

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –≤ 2025

---

‚≠ê –ü–æ—Å—Ç–∞–≤—å –∑–≤–µ–∑–¥—É, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è!
